<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:ct="http://www.chartistjsf.org/charts"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:p="http://primefaces.org/ui">
    <head jsf:id="head">

        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps."/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <title>LRP - Painel Administrativo</title>

        <!-- Add to homescreen for Chrome on Android -->
        <meta name="mobile-web-app-capable" content="yes"/>


        <!-- Add to homescreen for Safari on iOS -->
        <meta name="apple-mobile-web-app-capable" content="yes"/>
        <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
        <meta name="apple-mobile-web-app-title" content="Material Design Lite"/>


        <!-- Tile icon for Win8 (144x144 + tile color) -->
        <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png"/>
        <meta name="msapplication-TileColor" content="#3372DF"/>

        <!-- CSS -->
        <link jsf:name="contents/img/DB_16х16.png" rel="icon" type="image/png" href="contents/img/DB_16х16.png"/>
        <link jsf:name="contents/css/font-awesome.min.css" rel="stylesheet" href="contents/css/font-awesome.min.css" />        
        <link jsf:name="contents/css/bootstrap.min.css" rel="stylesheet" href="contents/css/bootstrap.min.css" />        
        <link jsf:name="contents/css/mdb.min.css" rel="stylesheet" href="contents/css/mdb.min.css" />        
        <link jsf:name="contents/css/style.css" rel="stylesheet" href="contents/css/style.css" />
        <link jsf:name="contents/css/lib/getmdl-select.min.css" rel="stylesheet" href="contents/css/lib/getmdl-select.min.css"/>
        <link jsf:name="contents/css/lib/nv.d3.css" rel="stylesheet" href="contents/css/lib/nv.d3.css"/>
        <link jsf:name="contents/css/application.css" rel="stylesheet" href="contents/css/application.css"/>
        <link href='https://fonts.googleapis.com/css?family=Roboto:400,500,300,100,700,900' rel='stylesheet' type='text/css'></link>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"></link>


    </head> 
    <body jsf:id="body">
        <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header is-small-screen">
            <header class="mdl-layout__header">
                <div class="mdl-layout__header-row">
                    <div class="mdl-layout-spacer">LRP - Painel Administrativo</div>

                    <div class="avatar-dropdown" id="icon">
                        <span>#{name}</span>
                        <img src="contents/img/Icon_header.png"/>
                    </div>
                    <!-- Account dropdawn-->
                    <ul class="mdl-menu mdl-list mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect mdl-shadow--2dp account-dropdown" for="icon" style="a:link, a:visited, a:hover, a:active {text-decoration: none}">
                        <li class="mdl-list__item mdl-list__item--two-line">
                            <span class="mdl-list__item-primary-content">
                                <span class="material-icons mdl-list__item-avatar"></span>
                                <span>#{name} - #{surname}</span>
                                <span class="mdl-list__item-sub-title">#{email}</span>
                            </span>
                        </li>

                        <li class="mdl-menu__item mdl-list__item" >
                            <a style="a:link { text-decoration:none;}" href="#{request.contextPath}/logout">
                            <span class="mdl-list__item-primary-content" >
                                <i class="material-icons mdl-list__item-icon text-color--secondary">exit_to_app</i>
                                Log out
                            </span>
                            </a>    
                        </li>
                    </ul>

                </div>
            </header>

            <main class="mdl-layout__content">

                <!-- Mapa de Vendas -->
                <div class="mdl-cell mdl-cell--12-col-desktop mdl-cell--12-col-tablet mdl-cell--4-col-phone">
                    <div class="mdl-card  ">
                        <a href="#{request.contextPath}/vendas" >
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text" style="a:link, a:visited, a:hover, a:active {text-decoration: none}">Mapa de Vendas</h2>
                            </div></a>
                        <div class="mdl-card__supporting-text ">
                            <div style="margin-left: 2.5%; margin-top: 0%; margin-right: 0%; width: 98%;">

                                <h:dataTable id="poll" class="table table-bordered table-striped table-sm" style="font-size: 86%;" value="#{barChartDataBean.vendas}" var="s" width="100%" >

                                    <h:column>
                                        <f:facet name="header"><span style="text-align: center;">FILIAL</span></f:facet>
                                        <span class="text-lg-center" style="color: #0059bc; font-weight: bold;">#{s.branchNumber}</span>
                                        <f:facet name="footer"><span class="text-lg-center" style="font-weight: bold;">#</span></f:facet>
                                    </h:column>

                                    <h:column>
                                        <f:facet class="text-lg-center" name="header"><span style="text-align: center;">NOME FILIAL</span></f:facet>
                                        <span class="text-lg-center" style="color: #0059bc; font-weight: bold;">#{s.trade}</span>
                                        <f:facet name="footer"><span class="text-lg-center" style="font-weight: bold;">TOTAIS</span></f:facet>
                                    </h:column>
                                    <h:column>
                                        <f:facet class="text-lg-center" name="header">VALOR BRUTO PRODUTOS</f:facet>
                                        <span class="text-lg-center" style="color: #0059bc; font-weight: bold;"><h:outputText value="#{s.prodSaleTotal}"><f:convertNumber pattern="#,##0.00" minFractionDigits="2"/></h:outputText></span>
                                        <f:facet name="footer"><span class="text-lg-center" style="font-weight: bold;"><h:outputText value="#{barChartDataBean.vendas.stream().map(s->s.prodSaleTotal).sum()}"><f:convertNumber pattern="#,##0.00" minFractionDigits="2"/></h:outputText></span></f:facet>
                                    </h:column>
                                    <h:column>
                                        <f:facet class="text-lg-center" name="header">TOTAL DEVOLVIDO PRODUTOS</f:facet>
                                        <span class="text-lg-center" style="color: red; font-weight: bold;"><h:outputText value="#{s.prodDevolutionTotal}"><f:convertNumber pattern="#,##0.00" minFractionDigits="2"/></h:outputText></span>
                                        <f:facet name="footer"><span class="text-lg-center" style="font-weight: bold;"><h:outputText value="#{barChartDataBean.vendas.stream().map(s->s.prodDevolutionTotal).sum()}"><f:convertNumber pattern="#,##0.00" minFractionDigits="2"/></h:outputText></span></f:facet>
                                    </h:column>
                                    <h:column>
                                        <f:facet class="text-lg-center" name="header">VENDA LÍQUIDA PRODUTOS</f:facet>
                                        <span class="text-lg-center" style="color: #0059bc; font-weight: bold;"><h:outputText value="#{s.prodBalanceTotal}"><f:convertNumber pattern="#,##0.00" minFractionDigits="2"/></h:outputText></span>
                                        <f:facet name="footer"><span class="text-lg-center" style="font-weight: bold;"><h:outputText value="#{barChartDataBean.vendas.stream().map(s->s.prodBalanceTotal).sum()}"><f:convertNumber pattern="#,##0.00" minFractionDigits="2"/></h:outputText></span></f:facet>
                                    </h:column>
                                    <h:column>
                                        <f:facet class="text-lg-center" name="header">VENDA LÍQUIDA SERVIÇOS</f:facet>
                                        <span class="text-lg-center" style="color: #0059bc; font-weight: bold;"><h:outputText value="#{s.servBalanceTotal}"><f:convertNumber pattern="#,##0.00" minFractionDigits="2"/></h:outputText></span>
                                        <f:facet name="footer"><span class="text-lg-center" style="font-weight: bold;"><h:outputText value="#{barChartDataBean.vendas.stream().map(s->s.servBalanceTotal).sum()}"><f:convertNumber pattern="#,##0.00" minFractionDigits="2"/></h:outputText></span></f:facet>
                                    </h:column>
                                    <h:column>
                                        <f:facet class="text-lg-center" name="header">VENDA LÍQUIDA RECARGAS</f:facet>
                                        <span class="text-lg-center" style="color: #0059bc; font-weight: bold;"><h:outputText value="#{s.rechargeTotal}"><f:convertNumber pattern="#,##0.00" minFractionDigits="2"/></h:outputText></span>
                                        <f:facet name="footer"><span class="text-lg-center" style="font-weight: bold;"><h:outputText value="#{barChartDataBean.vendas.stream().map(s->s.rechargeTotal).sum()}"><f:convertNumber pattern="#,##0.00" minFractionDigits="2"/></h:outputText></span></f:facet>
                                    </h:column>
                                    <h:column>
                                        <f:facet class="text-lg-center" name="header">VENDA LÍQUIDA TOTAL</f:facet>
                                        <span class="text-lg-center" style="color: #0059bc; font-weight: bold;"><h:outputText value="#{s.balanceTotal}"><f:convertNumber pattern="#,##0.00" minFractionDigits="2"/></h:outputText></span>
                                        <f:facet name="footer"><span class="text-lg-center" style="font-weight: bold;"><h:outputText value="#{barChartDataBean.vendas.stream().map(s->s.balanceTotal).sum()}"><f:convertNumber pattern="#,##0.00" minFractionDigits="2"/></h:outputText></span></f:facet>
                                    </h:column>
                                </h:dataTable> 

                            </div>                           
                        </div>
                    </div>
                </div>                



                <div class="mdl-grid mdl-cell mdl-cell--9-col-desktop mdl-cell--12-col-tablet mdl-cell--4-col-phone mdl-cell--top">

                    <!-- Pie chart-->
                    <div class="mdl-cell mdl-cell--4-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
                        <div class="mdl-card mdl-shadow--2dp pie-chart">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">Top 3 Filiais</h2>
                            </div>
                            <div class="mdl-card__supporting-text" >
                                <div style="margin-left: 10%;">
                                    <p:growl autoUpdate="true" />
                                    <ct:chart id="pieChart" type="pie" model="#{pieChartDataBean.pieChartModel}" style="width:100%; height:45%" >
                                        <p:ajax event="itemSelect" listener="#{pieChartDataBean.pieItemSelect}" />
                                    </ct:chart>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Line chart-->
                    <div class="mdl-cell mdl-cell--12-col-desktop mdl-cell--8-col-tablet mdl-cell--4-col-phone">
                        <div class="mdl-card mdl-shadow--2dp line-chart">
                            <a href="#{request.contextPath}/graficos" ></a>
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">Termômetro de Vendas</h2>
                            </div>
                            <div class="mdl-card__supporting-text">
                                <div >

                                    <ct:chart id="barChart" type="bar" model="#{barChartDataBean.barChartModel}" style="width:100%; height:45%">
                                    </ct:chart>

                                    <p:message id="barChartMessage" for="barChart" showDetail="true" />                                

                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </main>
        </div>

        <script jsf:name="contents/js/d3.js" type="text/javascript" src="contents/js/d3.js"/>
        <script jsf:name="contents/js/getmdl-select.min.js" type="text/javascript" src="contents/js/getmdl-select.min.js"/>
        <script jsf:name="contents/js/material.js" type="text/javascript" src="contents/js/material.js"/>
        <script jsf:name="contents/js/nv.d3.js" type="text/javascript" src="contents/js/nv.d3.js"/>
        <script jsf:name="contents/js/widgets/map/maps.js" type="text/javascript" src="contents/js/widgets/map/maps.js"/>
        <script jsf:name="contents/js/widgets/table/table.js" type="text/javascript" src="contents/js/widgets/table/table.js"/>
        <script jsf:name="contents/js/widgets/todo/todo.js" type="text/javascript" src="contents/js/widgets/todo/todo.js"/>
        <script jsf:name="contents/js/utils.js" type="text/javascript" src="contents/js/utils.js"/>       
        <script jsf:name="contents/js/jquery-3.1.1.min.js" type="text/javascript" src="contents/js/jquery-3.1.1.min.js"/>
        <script jsf:name="contents/js/tether.min.js" type="text/javascript" src="contents/js/tether.min.js"/>
        <script jsf:name="contents/js/bootstrap.min.js" type="text/javascript" src="contents/js/bootstrap.min.js"/>
        <script jsf:name="contents/js/mdb.min.js" type="text/javascript" src="contents/js/mdb.min.js"/>

    </body>
</html>
